统一配置管理系统文档


作者:吕欣然


一、需求分析

1.1总体需求

主要需求是为了统一很多台服务器的配置文件。因为每个服务器都有多个配置文件，而且有些是相同的。那么，每次去修改配置文件的工作就变得繁重，为了使配置文件得到更好更客观的管理，进行此系统的开发。此系统的功能就是实现在配置系统服务器上更改配置文件，使得所有使用此配置文件的服务器得到第一时间的配置文件修改。

1.2功能需求

为了使管理人员更方便更直接的对配置文件进行操作，此管理系统初步实现了几个功能，分别是，配置文件修改、添加、删除，配置文件预览，以及上传配置文件。

1.2.1添加节点

添加节点指添加文件夹，配置文件，文件内标题，以及配置文件属性四种。

1.2.2修改节点

修改节点指对各个节点的修改操作，可以修改的有标题和内容（仅限属性节点）。

1.2.3删除节点

删除节点指删除树上的节点，包括文件夹、文件、标题以及属性。


1.2.4文件预览

方便管理人员更清晰地对整个配置文件的信息进行审阅，文件预览功能对已选中的配置文件进行内容的展示

1.2.5文件上传

对于新文件，提供文件上传的功能，避免输入错误以及输入工作繁重。

二、设计阶段

2.1总体设计




2.2开发设计

将所存储的节点信息利用树的形式表达出来，更有层次感更清晰的看出节点间的关系


2.3数据库设计

一部分使用zookeeper后端存储节点信息，以及节点内容，另一部分用Mysql实现对节点种类信息的存储


三、开发阶段

3.1开发前准备

使用前后端分离技术，搭建后端Java开发环境、zookeeper集群环境、数据库表、前端vue环境

3.1.1前端开发

前端使用vue作为开发语言，端口号8080，使用iview组件进行拼接
   

3.1.2后端开发

后端使用springboot框架进行搭建，接收前台传来的请求并处理

3.1.3zookeeper集群

在本地使用3个zookeeper模拟集群：


3.1.4具体流程

前台发送修改文件请求，后端收到请求利用zkclient对zookeeper进行操作同时对mysql进行更新，返回给前台结果。同时主机服务器的配置文件若监听到对应修改的配置文件，就会将其重新获取，取到最新的配置文件信息。

四、重构优化阶段

4.1优化上传时间

4.2重构接口转换为Restful风格


